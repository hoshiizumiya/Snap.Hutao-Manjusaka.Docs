<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Redirecting...</title>
    <script>
        (function () {
            var path = window.location.pathname;
            var base = '/Snap.Hutao-Manjusaka.Docs/';

            // Remove base from path
            if (path.startsWith(base)) {
                path = path.substring(base.length);
            }

            // If path already starts with a language code, do nothing
            var langCodes = ['zh', 'en', 'ru', 'id', 'jp', 'tw'];
            var pathParts = path.split('/');
            if (langCodes.includes(pathParts[0])) {
                // Already in a language path, show 404
                document.body.innerHTML = '<h1>404 - Page Not Found</h1><p>The page you are looking for does not exist.</p>';
                return;
            }

            // Detect browser language
            var lang = navigator.language.split('-')[0];
            var supportedLangs = ['zh', 'en', 'ru', 'id', 'jp', 'tw'];
            var targetLang = supportedLangs.includes(lang) ? lang : 'zh';

            // Redirect to the language-specific path
            var newPath = base + targetLang + '/' + path;
            window.location.href = newPath;
        })();
    </script>
</head>

<body>
    <p>Redirecting...</p>
</body>

</html>