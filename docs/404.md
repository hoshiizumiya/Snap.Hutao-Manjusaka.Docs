---
layout: page
title: 404 - Page Not Found
---

<script setup>
import { onMounted } from 'vue'
import { useData } from 'vitepress'

const { site } = useData()

onMounted(() => {
  const supportedLangs = ['zh', 'en', 'ru', 'id', 'jp', 'tw']

  const detectTargetLang = () => {
    const raw = (navigator.language || '').toLowerCase()
    if (raw.startsWith('ja')) return 'jp'
    if (raw.startsWith('zh')) {
      if (raw.includes('-tw') || raw.includes('-hk') || raw.includes('-mo')) return 'tw'
      return 'zh'
    }
    const primary = raw.split('-')[0]
    return supportedLangs.includes(primary) ? primary : 'zh'
  }

  const path = window.location.pathname
  const base = site.value.base

  // Remove base from path
  let relativePath = path
  if (relativePath.startsWith(base)) {
    relativePath = relativePath.substring(base.length)
  }
  relativePath = relativePath.replace(/^\//, '')

  // 已经有语言前缀就不处理（显示 404）
  const firstSegment = relativePath.split('/')[0]
  if (supportedLangs.includes(firstSegment)) return

  // 过滤静态资源（允许 *.html 旧链接）
  const isHtml = relativePath.endsWith('.html')
  if (relativePath.includes('.') && !isHtml) return

  // 兼容 cleanUrls
  const normalized = isHtml ? relativePath.slice(0, -'.html'.length) : relativePath

  const targetLang = detectTargetLang()
  const newPath = (base + targetLang + '/' + normalized).replace(/\/{2,}/g, '/')
  window.location.replace(newPath)
})
</script>

# 404 - Page Not Found

The page you are looking for does not exist. Redirecting...