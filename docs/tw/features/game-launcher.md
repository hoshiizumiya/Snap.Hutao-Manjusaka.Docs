---
headerDepth: 2
category: [功能, 教程]
tag: [幀率解限, 服務器轉換, 切換帳號]
order: 4
comment: false
description: 胡桃工具箱的高級啟動器支持自定義啟動參數、服務器轉換、幀率解限等功能，顯著提升用戶遊戲體驗。
---
::: caution
開發人員不為任何功能負責，使用相關功能即視為用戶同意自行承擔相關風險。
:::
# 高級啟動器

![遊戲啟動器](https://img.alicdn.com/imgextra/i4/1797064093/O1CN014YLRnj1g6e0zQaBl6_!!1797064093.png_.webp)

胡桃工具箱的高級啟動器通過多樣的設置選項，提供更靈活的遊戲啟動體驗。
::: warning
高級啟動器功能已暫時停止支持，自定義啟動依賴於**非官方軟件**，使用時請注意相關風險。
:::
::: caution
使用**任何非官方軟件**都**有概率**導致您的虛擬財產受損，繼續使用本軟件相關功能將視為**您已知曉並同意**我們的[使用條款](/zh/statements/tos.md)
:::
::: tip
下面的內容僅供留存和參考
:::
## 初始化設置

- 點擊左側菜單欄的“啟動遊戲”進入高級啟動器功能。
  - 首次使用時將跳轉至設置頁面，要求設置遊戲路徑。
  - **請選擇遊戲主程序路徑（`YuanShen.exe`），而非啟動器路徑（`launcher.exe`）。**
    - 示例路徑：`D:\miHoYo Launcher\games\Genshin Impact Game\YuanShen.exe`
  - 成功檢測遊戲路徑後，點擊確認。
  - 若未安裝遊戲，可點擊“安裝遊戲”按鈕並按照提示設置安裝目錄，胡桃將自動下載並安裝遊戲。
- 配置完成後，點擊右上角的“啟動遊戲”按鈕啟動遊戲。

## 切換服務器

::: tip 權限提示
使用該功能需以管理員權限運行胡桃工具箱。
胡桃工具箱將在數據目錄下創建名為 `ServerCache` 的文件夾，用於存儲轉換服務器所需文件，並自動檢查更新。
:::

1. 進入“啟動遊戲”頁面。
2. 在“服務器”項中選擇目標服務器。

**可選服務器包括：**

| 選項            | 服務器                                            |
| --------------- | ------------------------------------------------- |
| 官方服 Default  | 中國大陸服務器                                    |
| 官方服 Official | 中國大陸服務器，與上一欄無實質區別                |
| 官方服 NoTapTap | 禁用 TapTap 登錄的中國大陸服務器                  |
| 國際服 Default  | HoYoverse 國際服服務器                            |
| 國際服 Official | HoYoverse 國際服服務器，與上一欄無實質區別        |
| 國際服 Epic     | 使用 Epic 支付網關的 HoYoverse 國際服服務器       |
| 國際服 Google   | 使用 Google Pay 支付網關的 HoYoverse 國際服服務器 |

點擊右上角的“啟動遊戲”按鈕，胡桃將從官方服務器下載相關文件並應用，隨後啟動遊戲。

## 賬號保存

::: tip
本功能記錄原神遊戲賬號的登錄狀態。
:::

1. 進入“啟動遊戲”頁面。
2. 點擊“檢測賬號”，胡桃工具箱將保存當前遊戲的登錄狀態。
3. 在彈出的“為賬號命名”窗口中輸入名稱並確認。
4. 註銷當前賬號並登錄新賬號，重複上述步驟保存多個賬號。
5. 使用賬號切換功能選擇已保存的賬號。
6. **不同服務器的登錄狀態互不影響**：
   - 例如，國服登錄賬號 A，外服登錄賬號 B；A 僅在國服時可見，B 僅在外服時可見。

## 使用米遊社 / HoYoLAB 登錄

::: warning
啟用前需先開啟“啟動參數”功能。
:::

啟用後，胡桃工具箱將使用已登錄的米遊社 / HoYoLAB 賬戶直接登錄綁定的原神賬號。

## Windows 平臺 HDR 支持

原神內置的 HDR 功能需通過註冊表鍵值開啟，胡桃工具箱可啟用此功能以提升視覺體驗。

## 啟動參數

在“啟動參數”功能中，用戶可設置以下高級選項：

- **獨佔全屏**：`-window-mode exclusive`
  - 遊戲進程以獨佔全屏模式運行。
- **全屏**：`-screen-fullscreen`
  - 遊戲以全屏模式啟動。
- **無邊框**：`-popupwindow`
  - 遊戲以無邊框窗口模式啟動。
- **觸摸屏模式**：`-platform_type CLOUD_THIRD_PARTY_MOBILE`
  - 啟用觸摸屏操作模式（鍵鼠輸入將被禁用）。
- **分辨率設置**：
  - `-screen-width`：設置屏幕寬度（例如 1920）。
  - `-screen-height`：設置屏幕高度（例如 1080）。
- **顯示器選擇**：`-monitor`
  - 指定目標顯示器運行遊戲。
  - 若不確定顯示器編號，可點擊“識別顯示器”獲取提示。

## 資源下載

胡桃工具箱的“資源下載”頁籤提供中國大陸服務器的遊戲安裝包和增量包的實時鏈接，用戶可直接跳轉至瀏覽器下載。

- 用戶需將下載的文件放置至遊戲程序同級目錄，並通過官方啟動器完成更新。

## 自定義啟動

自定義啟動可以讓你便捷地一鍵運行胡桃工具箱外部的程序。
- 啟動自定義程序
  - 可以快捷在胡桃內啟動指定路徑的應用程序，同時你可以下載自定義 json 文件來擴展更多的啟動選項。請確保 json 文件的來源和清單內容可靠，以免造成不必要的損失。
  - 清單數據位於 settings.json 文件中，位於 `%USERPROFILE%\AppData\Local\Hutao\settings.json` 路徑下。
- 啟動延遲啟動清單中的程序
  - 你可以設置延遲啟動清單列表中的程序，左鍵點擊後將同時執行列表中的程序開始計時並按時執行，並非存在順序。如果以非管理員賬號運行胡桃工具箱，則清單中的程序也可能將以非管理員權限啟動，在遇到強制需要 UAC 權限的程序時，UAC 彈窗可能會造成延遲時間不準確。
  - 清單數據將保存在 userdate.db 數據庫中。
- 連帶啟動
  - 你可以選擇在胡桃內啟動遊戲時和啟動自定義程序時是否同時觸發延遲啟動清單中的程序
- 自定義啟動暫不支持傳入啟動參數

## ~~注入功能~~

::: caution
注入功能使用不當可能導致設備或遊戲數據損壞，啟用即視為用戶同意自行承擔相關風險。
:::

### 幀率限制解除

依託 [~~UnlockerIsland 項目~~](https://github.com/DGP-Studio/UnlockerIsland)，解除原神的幀率限制。

- **使用方法：**
  1. 以管理員權限運行胡桃工具箱。
  2. 在“注入”模塊中設置目標幀率。
  3. 點擊“啟動遊戲”按鈕。

#### 會導致**幀率限制解除失敗**的因素

1. 胡桃工具箱沒有保持在後臺運行
2. 遊戲內未關閉**垂直同步**選項
3. 在顯卡驅動中存在“最大幀速率”的設置
4. 在顯卡驅動軟件內存在未關閉的類似於“節能模式”的選項
5. 顯卡性能不足
6. 未安裝 MSVCRT 庫

### 視野調整

調整相機視野範圍和迷霧可見性，提供更佳的視覺體驗。

### 隊伍配置進度條設置

調整隊伍配置進度條的顯示狀態，僅在**正常情況**下可切換隊伍時生效。

## 進程聯動

### 時長統計

需安裝並配置 [Starward](https://github.com/Scighost/Starward)。啟用後，胡桃工具箱將調用 Starward 接口以記錄遊戲時長。

### Better GI 聯動

需安裝並配置 [Better Genshin Impact](https://bgi.huiyadan.com/)。啟用後，胡桃工具箱將調用其接口以啟用基於計算機視覺技術（OCR）的自動化功能。

### Discord Activity

需安裝並配置 [Discord](https://discord.com/)。啟用後，胡桃工具箱將生成 Discord 資料卡上的實時遊戲狀態。

## 常見問題

### 如何通過胡桃工具箱快速啟動遊戲

- 在主程序中正確設置高級啟動器功能。
- 在胡桃工具箱的主窗口未關閉時，可直接點擊“主頁-啟動遊戲”快速啟動。
- 點擊任務欄右下角的胡桃圖標（通常會被系統自動收納），選擇“啟動遊戲”。

  ![quick-start](https://img.alicdn.com/imgextra/i3/1797064093/O1CN01Uu8QzN1g6du6MRp8h_!!1797064093.png_.webp)

### 為什麼遊戲登錄狀態會失效，導致切換賬號功能無效

- 保存遊戲登錄狀態的關鍵因素包括：
  - **網絡環境**：公網 IP 地址頻繁變更可能導致登錄狀態失效。
  - **設備 ID**：如更換網卡或 MAC 地址可能導致登錄狀態失效。
- 常見原因及解決方法：
  1. 確保賬號已正確登錄後，進入遊戲。
  2. 關閉遊戲並確認遊戲進程已完全結束。
  3. 再次進行賬號檢測，確保登錄狀態被正確記錄。

### 開門時出現錯誤碼 `31-4302`

如遇到錯誤碼 `31-4302`，可通過開啟“啟動遊戲-注入-讓我進去”選項解決此問題。

### 轉換服務器失敗後如何恢復遊戲程序

::: info 功能原理說明
胡桃工具箱僅從原神官方服務器下載轉換服務器所需文件，確保文件安全可靠。如果頻繁因網絡問題導致轉換失敗，可能是網絡連接至目標服務器的質量較差。建議檢查網絡連接或聯繫網絡服務提供商。
:::

在轉換服務器過程中，若因意外退出或網絡問題導致轉換失敗，可能會導致遊戲客戶端損壞。胡桃工具箱會提示 `遊戲路徑不正確，前往設置更改遊戲路徑`，此時遊戲主程序文件可能已丟失。可按以下步驟手動恢復：

#### 手動恢復遊戲主程序

1. **定位備份文件**：
   - 舊版胡桃工具箱會在 `%userprofile%/Documents/Hutao/ServerCache` 目錄下存儲轉換前的遊戲備份文件。
   - 針對新版胡桃工具箱Manjusaka，前往以下路徑：`%USERPROFILE%\AppData\Local\Hutao`。如果你手動查找那麼 AppData 文件夾默認是隱藏的，若無法找到，請確保已啟用顯示隱藏文件夾的選項。
   - 備份文件包括：`GenshinImpact.exe` 和 `GenshinImpact_Data`（國際服），或 `YuanShen.exe` 和 `YuanShen_Data`（國服）。
2. **檢查遊戲目錄**：
   - 國際服目錄應包含 `GenshinImpact.exe` 和 `GenshinImpact_Data`。
   - 國服目錄應包含 `YuanShen.exe` 和 `YuanShen_Data`。
3. **手動恢復文件**：
   - 將備份目錄下的文件複製到遊戲主程序目錄中，覆蓋現有文件。
   - 如需切換服務器版本，將相關文件更名：例如，將 `YuanShen_Data` 更名為 `GenshinImpact_Data`。
4. **啟動遊戲**：
   - 重新進入胡桃工具箱的“啟動遊戲”界面並啟動。
   - 如錯誤提示消失，可繼續選擇目標服務器並完成轉換。

### 如何恢復 `config.ini` 配置文件

在某些情況下（如權限錯誤或轉換服務器失敗），`config.ini` 文件可能丟失，導致遊戲無法啟動。可手動創建並填入以下內容：

::: info
根據實際遊戲版本修改 `game_version` 參數。
:::

#### 配置文件內容示例

::: tabs #game_config_samples
== 國服 Official

```ini
[General]
channel=1
cps=mihoyo
game_version=5.3.0
sub_channel=1
sdk_version=
game_biz=hk4e_cn
uapc={"hk4e_cn":{"uapc":""},"hyp":{"uapc":""}}
```

== 國際服 Official

```ini
[General]
channel=1
cps=mihoyo
game_version=5.3.0
sub_channel=0
sdk_version=
game_biz=hk4e_global
uapc={"hk4e_global":{"uapc":""},"hyp":{"uapc":""}}
```

:::

將配置文件保存到遊戲安裝目錄下的 `/Genshin Impact Game/` 子目錄即可恢復正常啟動。
